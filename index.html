<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>REDCap TBS by rparrish</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>REDCap TBS</h1>
          <h2>This REDCap plugin displays formatted reports for individual records using the Tiny But Strong PHP template engine.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/rparrish/redcap_tbs/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/rparrish/redcap_tbs/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/rparrish/redcap_tbs" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="redcap-tbs" class="anchor" href="#redcap-tbs" aria-hidden="true"><span class="octicon octicon-link"></span></a>REDCap TBS</h1>

<p>The REDCap TBS plugin generates formatted reports for individual REDCap records using the Tiny But Strong PHP template engine. Template files can be written as HTML/CSS for layout and formatting. Word (.docx) template files can also be used.</p>

<p><strong>How it works:</strong> The template file includes placeholder tags for REDCap field names. The TBS template engine replaces these tags with the actual values from REDCap for the specific record.</p>

<p><strong>How it's used:</strong> REDCap TBS can be used to generated form letters with dynamic content based on REDCap variables. It can also be used to print the content of REDCap data collection instruments in a more concise format than the default PDF feature.</p>

<h3>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h3>

<ul>
<li>REDCap

<ul>
<li>version 6.2.2+ (not fully tested on earlier versions)</li>
<li>Bookmarks enabled</li>
</ul>
</li>
<li>
<a href="http://tinybutstrong.com">TinyButStrong</a>  3.9 - file included with plugin (licensed under LGPL)</li>
<li>
<a href="http://www.tinybutstrong.com/plugins/opentbs/tbs_plugin_opentbs.html">OpenTBS</a> 1.9.2 - creates Open Office and MS Office documents. File included with plugin (licensed under LGPL)</li>
<li>Familiarity with editing HTML/CSS files</li>
</ul>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>Download the .zip archive and extract the redcap_tbs folder into the REDCap plugins folder (redcap/plugins/redcap_tbs/)</p>

<h3>
<a id="initial-testing" class="anchor" href="#initial-testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial Testing</h3>

<p>The .docx templates depend on the OpenTBS plugin for TinyButStrong. Confirm that the installation is configured correctly by opening <code>https://YOUR_SERVER/redcap/plugins/redcap_tbs/demo/index.php</code>. Follow the prompts and use the OpenTBS documentation/support forums for further troubleshooting if necessary. </p>

<h4>
<a id="1-add-the-template-files" class="anchor" href="#1-add-the-template-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Add the Template Files</h4>

<p>The template subfolder contains the template files. Template files must contain valid HTML/CSS  or be a valid .docx file. Additional subfolders can be used to organize templates by project. </p>

<p>REDCap variables are inserted into the template content with this tag format <code>[onshow.data.foo]</code> where 'foo' is a REDCap Project field name. </p>

<ul>
<li>Basic usage - <code>&lt;P&gt;Hello [onshow.data.name]&lt;/P&gt;</code> ==&gt; <code>Hello Peter</code><br>
</li>
<li>Reformatting dates - <code>&lt;P&gt;Date: [onshow.data.date; frm='m/d/yy']&lt;/P&gt;</code> ==&gt; <code>Date:  9/1/13</code><br>
</li>
<li>Dynamic images (HTML) - <code>&lt;IMG SRC="./[onshow.data.cardiology]-small.png?raw"&lt;/IMG&gt;'</code> ==&gt; An image name can be based on the value of a REDCap field. The image files can be located in the same folder as the template. </li>
</ul>

<p>Additional information can be found on the <a href="TinyButStrong%20Examples">http://tinybutstrong.com/examples.php</a> page and in the TinyButStrong <a href="Documentaion%20Manual">http://tinybutstrong.com/manual.php</a>.</p>

<h4>
<a id="2-add-a-new-project-bookmark" class="anchor" href="#2-add-a-new-project-bookmark" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Add a new Project Bookmark.</h4>

<ul>
<li>Link Type - Select Advanced Link. This verifies the identity of the user.</li>
<li>User Access - Selecting 'All users' will give access to any user that has access to this project. The 'Selected Users' option can be used to restrict the link to specific users. </li>
<li>Link URL - <code>https://YOUR_SERVER/redcap/plugins/redcap_tbs/index.php?template=example.html</code>

<ul>
<li>change 'EXAMPLE.ORG' to the domain name of the REDCap installation.</li>
<li>OPTIONS:

<ul>
<li>change the value after 'template='  to the desired template filename.</li>
<li>Disable the REDCap Project header by adding <code>&amp;header=false</code>
</li>
<li>Template subfolders can be accessed by adding the folder names to the template parameter (ie. <code>?template=fruit/demo.docx</code>
</li>
</ul>
</li>
</ul>
</li>
<li>Check the boxes for "Append record ID" and "Append project ID".</li>
</ul>

<h3>
<a id="feedback" class="anchor" href="#feedback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Feedback</h3>

<p>You are welcome to:</p>

<ul>
<li>submit suggestions and bug-reports at: <a href="https://github.com/rparrish/redcap_tbs/issues">https://github.com/rparrish/redcap_tbs/issues</a>
</li>
<li>compose a friendly email to: <a href="mailto:rollie.parrish@ampa.org">rollie.parrish@ampa.org</a>
</li>
</ul>

<h4>
<a id="authorscontributors" class="anchor" href="#authorscontributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authors/Contributors</h4>

<ul>
<li>
<strong>Author</strong>: Rollie Parrish (AMPA)</li>
</ul>
        </section>

        <footer>
          REDCap TBS is maintained by <a href="https://github.com/rparrish">rparrish</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>